const apiInfo=Array.from(document.getElementsByClassName("operation-tag-content")[0].children).map((d,i)=>({href:null,method:d.querySelector(".opblock-summary-method").innerText.toLowerCase(),button:getButton(i),apiContent:d}));function tryLogout(idx){const button=apiInfo[idx].button;button.innerText="Logout...",button.disabled=!0,fetch(apiInfo[idx].href,{method:apiInfo[idx].method,headers:{Authorization:"Basic "+btoa("log:out")}}).then(d=>{button.innerText="401"==d.status?"OK!":"Error!"},()=>button.innerText="Request Failed!").then(()=>{setTimeout(()=>{button.innerText="Logout",button.disabled=!1},1e3)})}function getButton(idx){const button=document.createElement("button");return button.innerText="Logout",button.onclick=tryLogout.bind(null,idx),button.className="btn try-out__btn try-logout hidden",button}function update(){apiInfo.forEach((d,i)=>{if(!d.apiContent.querySelector(".request-url pre"))return;const tryout=d.apiContent.querySelector(".try-out");1===tryout.children.length&&tryout.appendChild(d.button);const code=Number.parseInt(d.apiContent.querySelector(".response .response-col_status").innerText,10);d.button.classList.add("hidden"),400<=code&&code<500||(d.href=d.apiContent.querySelector(".request-url pre").innerText,d.button.classList.remove("hidden"))})}setInterval(update,1e3);
